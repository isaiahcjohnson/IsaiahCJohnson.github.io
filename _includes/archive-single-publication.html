{%- comment -%}
Custom archive card for publications/research.
- Shows "Published in Venue, YYYY" for published items (have `venue:`).
- Shows "Last updated: Month DD, YYYY" for working papers (`category: working_papers` or categories contains it).
- Works with Minimal Mistakes styling.
Expects a loop variable named `post`.
{%- endcomment -%}

<article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
  <h2 class="archive__item-title no_toc" itemprop="headline">
    <a href="{{ post.url | relative_url }}" rel="permalink">{{ post.title }}</a>
  </h2>

  {%- assign is_working =
    (post.category == "working_papers") or
    (post.categories and post.categories contains "working_papers")
  -%}

  <p class="archive__item-meta">
    {%- if post.collection == 'teaching' and post.date -%}
      {{ post.type }}, <i>{{ post.venue }}</i>, {{ post.date | date: "%Y" }}
    {%- elsif post.venue and post.date and not is_working -%}
      Published in <i>{{ post.venue }}</i>, {{ post.date | date: "%Y" }}
    {%- elsif post.date -%}
      <strong>Last updated:</strong> {{ post.date | date: "%B %d, %Y" }}
    {%- endif -%}
  </p>

  {%- if post.excerpt -%}
    <p class="archive__item-excerpt" itemprop="description">{{ post.excerpt }}</p>
  {%- endif -%}
</article>
